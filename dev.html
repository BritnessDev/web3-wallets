<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="https://depay.fi/favicon.png"/>
    <title>Development</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdn.ethers.io/lib/ethers-5.4.umd.min.js" type="application/javascript"></script>
    <script crossorigin src="https://unpkg.com/@depay/web3-blockchains@4"></script>
    <script crossorigin src="https://unpkg.com/@depay/web3-constants@5"></script>
    <script crossorigin src="https://unpkg.com/@depay/web3-client@8"></script>
    <script crossorigin src="https://unpkg.com/@depay/walletconnect-v1@1.1"></script>
    <script src="tmp/index.dev.js"></script>
  </head>
  <body>
    <div class="container">

      <div class="row pt-5">
        <div class="col">
          <h1>Wallet Name</h1>
          <p>Retrieves the name of the connect crypto wallet</p>
          <button class='btn btn-primary' onClick='alert(Web3Wallets.getWallet().name)'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Wallet Connect</h1>
          <p>Connects to the available crypto wallet</p>
          <script>
            window.connectWallet = async function(){
              alert(await Web3Wallets.getWallet().connect() + " connected")
            }
          </script>
          <button class='btn btn-primary' onClick='window.connectWallet()'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Wallet Changes Account</h1>
          <p>Executes callback function in case event happens</p>
          <script>
            window.setupAccountChanged = async function(){
              Web3Wallets.getWallet().on('account', (newAccount)=>{
                alert(newAccount)
              })
              alert('Now change the wallet account!')
            }
          </script>
          <button class='btn btn-primary' onClick='window.setupAccountChanged()'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Wallet Changes Network</h1>
          <p>Executes callback function in case event happens</p>
          <script>
            window.setupNetworkChanged = async function(){
              Web3Wallets.getWallet().on('network', (newNetwork)=>{
                alert(newNetwork)
              })
              alert('Now change the wallet network!')
            }
          </script>
          <button class='btn btn-primary' onClick='window.setupNetworkChanged()'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Wallet Disconnected</h1>
          <p>Executes callback function in case disconnect happens</p>
          <script>
            window.setupDisconnected = async function(){
              Web3Wallets.getWallet().on('disconnect', ()=>{
                alert('Disconnected')
              })
              alert('Now disconnect the wallet!')
            }
          </script>
          <button class='btn btn-primary' onClick='window.setupDisconnected()'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Wallet Debug</h1>
          <p>Yields the entire window.ethereum</p>
          <button class='btn btn-primary' onClick='alert(Object.keys(window.ethereum))'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>WalletConnect connect</h1>
          <p>Test wallet connect</p>
          <button class='btn btn-primary' onClick='new Web3Wallets.wallets.WalletConnect().connect()'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Send transaction</h1>
          <p></p>
          <button class='btn btn-primary' onClick='Web3Wallets.getWallet().sendTransaction({ blockchain: "bsc", to: "0x08B277154218CCF3380CAE48d630DA13462E3950", from: "0x317D875cA3B9f8d14f960486C0d1D1913be74e90", value: "1000000000000000", sent: function(transaction){ console.log("sent callack", transaction) }, confirmed: function(transaction){ console.log("confirmed callack", transaction) }, failed: function(transaction){ console.log("failed callack", transaction) }  } )'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Send smart contract transaction</h1>
          <p></p>
          <button class='btn btn-primary' onClick='Web3Wallets.getWallet().sendTransaction({ blockchain: "bsc", to: "0x0Dfb7137bC64b63F7a0de7Cb9CDa178702666220", from: "0x317D875cA3B9f8d14f960486C0d1D1913be74e90", value: "1000000000000000", method: "route", params: { path: ["0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"], amounts: ["1000000000000000","1000000000000000"], addresses: ["0x08B277154218CCF3380CAE48d630DA13462E3950"], plugins: ["0x8B127D169D232D5F3ebE1C3D06CE343FD7C1AA11"], data: [] }, sent: function(transaction){ console.log("sent callack", transaction) }, confirmed: function(transaction){ console.log("confirmed callack", transaction) }, failed: function(transaction){ console.log("failed callack", transaction) }, api: [{"inputs":[{"internalType":"address","name":"_configuration","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"ETH","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"configuration","outputs":[{"internalType":"contract DePayRouterV1Configuration","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"pluginAddress","type":"address"}],"name":"isApproved","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"path","type":"address[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"address[]","name":"addresses","type":"address[]"},{"internalType":"address[]","name":"plugins","type":"address[]"},{"internalType":"string[]","name":"data","type":"string[]"}],"name":"route","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}] } )'>Test it</button>
        </div>
      </div>

      <div class="row pt-5">
        <div class="col">
          <h1>Sign message</h1>
          <p></p>
          <button class='btn btn-primary' onClick='Web3Wallets.getWallet().sign("This is a test message\n\n And a new line").then((signature)=>{console.log(signature)})'>Test it</button>
        </div>
      </div>
    </div>
  </body>
</html>
